<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>pygraphblas.matrix API documentation</title>
    <meta name="description" content="" />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  .codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sa { color: #BA2121 } /* Literal.String.Affix */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .dl { color: #BA2121 } /* Literal.String.Delimiter */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .fm { color: #0000FF } /* Name.Function.Magic */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .vm { color: #19177C } /* Name.Variable.Magic */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">


    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#pygraphblas.matrix.Matrix">Matrix</a></span>
        
          
  <ul>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.__init__">__init__</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.apply">apply</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.apply_first">apply_first</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.apply_second">apply_second</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.assign_col">assign_col</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.assign_matrix">assign_matrix</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.assign_row">assign_row</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.assign_scalar">assign_scalar</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.cast">cast</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.clear">clear</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.compare">compare</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.diag">diag</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.dup">dup</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.eadd">eadd</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.emult">emult</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.extract_col">extract_col</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.extract_matrix">extract_matrix</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.extract_row">extract_row</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.full">full</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.get">get</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.iseq">iseq</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.isne">isne</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.kron">kron</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.kronecker">kronecker</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.mxm">mxm</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.mxv">mxv</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.nonzero">nonzero</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.offdiag">offdiag</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.pattern">pattern</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.reduce_bool">reduce_bool</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.reduce_float">reduce_float</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.reduce_int">reduce_int</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.reduce_vector">reduce_vector</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.resize">resize</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.select">select</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.to_arrays">to_arrays</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.to_binfile">to_binfile</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.to_image">to_image</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.to_lists">to_lists</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.to_mm">to_mm</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.to_numpy">to_numpy</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.to_scipy_sparse">to_scipy_sparse</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.to_string">to_string</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.transpose">transpose</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.tril">tril</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.triu">triu</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.wait">wait</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.dense">dense</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.from_binfile">from_binfile</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.from_lists">from_lists</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.from_mm">from_mm</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.from_tsv">from_tsv</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.identity">identity</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.random">random</a></li>
    <li class="mono"><a href="#pygraphblas.matrix.Matrix.sparse">sparse</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">pygraphblas.matrix</span> module</h1>
  
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">weakref</span>
<span class="kn">import</span> <span class="nn">operator</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="kn">from</span> <span class="nn">array</span> <span class="kn">import</span> <span class="n">array</span>

<span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">lib</span><span class="p">,</span>
    <span class="n">ffi</span><span class="p">,</span>
    <span class="n">NULL</span><span class="p">,</span>
    <span class="n">NoValue</span><span class="p">,</span>
    <span class="n">_check</span><span class="p">,</span>
    <span class="n">_error_codes</span><span class="p">,</span>
    <span class="n">_build_range</span><span class="p">,</span>
    <span class="n">_get_select_op</span><span class="p">,</span>
    <span class="n">_get_bin_op</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">types</span><span class="p">,</span> <span class="n">binaryop</span><span class="p">,</span> <span class="n">monoid</span><span class="p">,</span> <span class="n">unaryop</span><span class="p">,</span> <span class="n">semiring</span> <span class="k">as</span> <span class="n">_semiring</span>
<span class="kn">from</span> <span class="nn">.vector</span> <span class="kn">import</span> <span class="n">Vector</span>
<span class="kn">from</span> <span class="nn">.scalar</span> <span class="kn">import</span> <span class="n">Scalar</span>
<span class="kn">from</span> <span class="nn">.semiring</span> <span class="kn">import</span> <span class="n">Semiring</span><span class="p">,</span> <span class="n">current_semiring</span>
<span class="kn">from</span> <span class="nn">.binaryop</span> <span class="kn">import</span> <span class="n">BinaryOp</span><span class="p">,</span> <span class="n">current_accum</span><span class="p">,</span> <span class="n">current_binop</span>
<span class="kn">from</span> <span class="nn">.unaryop</span> <span class="kn">import</span> <span class="n">UnaryOp</span>
<span class="kn">from</span> <span class="nn">.monoid</span> <span class="kn">import</span> <span class="n">Monoid</span><span class="p">,</span> <span class="n">current_monoid</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">descriptor</span>
<span class="kn">from</span> <span class="nn">.descriptor</span> <span class="kn">import</span> <span class="n">Descriptor</span><span class="p">,</span> <span class="n">Default</span><span class="p">,</span> <span class="n">TransposeA</span><span class="p">,</span> <span class="n">current_desc</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Matrix&quot;</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">Matrix</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;GraphBLAS Sparse Matrix</span>

<span class="sd">    This is a high-level wrapper around the GrB_Matrix type.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;matrix&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;_funcs&quot;</span><span class="p">,</span> <span class="s2">&quot;_keep_alives&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">raise_no_val</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">res</span> <span class="o">!=</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_SUCCESS</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">raise_no_val</span> <span class="ow">and</span> <span class="n">res</span> <span class="o">==</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_NO_VALUE</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">KeyError</span>

            <span class="n">error_string</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;char**&quot;</span><span class="p">)</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_error</span><span class="p">(</span><span class="n">error_string</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">raise</span> <span class="n">_error_codes</span><span class="p">[</span><span class="n">res</span><span class="p">](</span><span class="n">ffi</span><span class="o">.</span><span class="n">string</span><span class="p">(</span><span class="n">error_string</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrix</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">typ</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_type</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Type*&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_type</span><span class="p">(</span><span class="n">new_type</span><span class="p">,</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

            <span class="n">typ</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">gb_type_to_type</span><span class="p">(</span><span class="n">new_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">matrix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">typ</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alives</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakKeyDictionary</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_free</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">sparse</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create an empty Matrix from the given type, number of rows, and</span>
<span class="sd">        number of columns.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_mat</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_new</span><span class="p">(</span><span class="n">new_mat</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">))</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">new_mat</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">dense</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">nrows</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">ncols</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;dense matrix must be at least 1x1&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fill</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fill</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">zero</span>
        <span class="n">m</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">fill</span>
        <span class="k">return</span> <span class="n">m</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_lists</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new matrix from the given lists of row indices, column</span>
<span class="sd">        indices, and values.  If nrows or ncols are not provided, they</span>
<span class="sd">        are computed from the max values of the provides row and</span>
<span class="sd">        column indices lists.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">I</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">J</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">nrows</span><span class="p">:</span>
            <span class="n">nrows</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">I</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ncols</span><span class="p">:</span>
            <span class="n">ncols</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">J</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="c1"># TODO use ffi and GrB_Matrix_build</span>
        <span class="k">if</span> <span class="n">typ</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">typ</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">_gb_from_type</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">V</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">V</span><span class="p">):</span>
            <span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">return</span> <span class="n">m</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_mm</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">mm_file</span><span class="p">,</span> <span class="n">typ</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new matrix by reading a Matrix Market file.&quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
        <span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_mmread</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">mm_file</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">i</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_tsv</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tsv_file</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new matrix by reading a tab separated value file.&quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
        <span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_tsvread</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">tsv_file</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">i</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_binfile</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">bin_file</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new matrix by reading a SuiteSparse specific binary file.&quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_binread</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">bin_file</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">random</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">typ</span><span class="p">,</span>
        <span class="n">nrows</span><span class="p">,</span>
        <span class="n">ncols</span><span class="p">,</span>
        <span class="n">nvals</span><span class="p">,</span>
        <span class="n">make_pattern</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">make_symmetric</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">make_skew_symmetric</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">make_hermitian</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">no_diagonal</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new random Matrix of the given type, number of rows,</span>
<span class="sd">        columns and values.  Other flags set additional properties the</span>
<span class="sd">        matrix will hold.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
        <span class="n">fseed</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;uint64_t*&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">seed</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">seed</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="p">)</span>
        <span class="n">fseed</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">seed</span>
        <span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_random</span><span class="p">(</span>
                <span class="n">result</span><span class="p">,</span>
                <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span>
                <span class="n">nrows</span><span class="p">,</span>
                <span class="n">ncols</span><span class="p">,</span>
                <span class="n">nvals</span><span class="p">,</span>
                <span class="n">make_pattern</span><span class="p">,</span>
                <span class="n">make_symmetric</span><span class="p">,</span>
                <span class="n">make_skew_symmetric</span><span class="p">,</span>
                <span class="n">make_hermitian</span><span class="p">,</span>
                <span class="n">no_diagonal</span><span class="p">,</span>
                <span class="n">fseed</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">i</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">identity</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">nrows</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">one</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">one</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">one</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nrows</span><span class="p">):</span>
            <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">one</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gb_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the GraphBLAS low-level type object of the Matrix.&quot;&quot;&quot;</span>
        <span class="n">new_type</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Type*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_type</span><span class="p">(</span><span class="n">new_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">new_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nrows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the number of Matrix rows.&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_nrows</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ncols</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the number of Matrix columns.&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_ncols</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">shape</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Numpy-like description of matrix shape.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nvals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the number of Matrix values.&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_nvals</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">T</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">dup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create an duplicate Matrix.&quot;&quot;&quot;</span>
        <span class="n">new_mat</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_dup</span><span class="p">(</span><span class="n">new_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">new_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hyper_switch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">switch</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;double*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_Option_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_HYPER_SWITCH</span><span class="p">,</span> <span class="n">switch</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">switch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@hyper_switch</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">hyper_switch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">switch</span><span class="p">):</span>
        <span class="n">switch</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;double&quot;</span><span class="p">,</span> <span class="n">switch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_Option_set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_HYPER_SWITCH</span><span class="p">,</span> <span class="n">switch</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">format</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GxB_Format_Value*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_Option_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_FORMAT</span><span class="p">,</span> <span class="nb">format</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">format</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@format</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="p">):</span>
        <span class="nb">format</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;GxB_Format_Value&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_Option_set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_FORMAT</span><span class="p">,</span> <span class="nb">format</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sparsity_control</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sparsity</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;int*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_Option_get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_SPARSITY_CONTROL</span><span class="p">,</span> <span class="n">sparsity</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">sparsity</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@sparsity_control</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">sparsity_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sparsity</span><span class="p">):</span>
        <span class="n">sparsity</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="n">sparsity</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_Option_set</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_SPARSITY_CONTROL</span><span class="p">,</span> <span class="n">sparsity</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sparsity_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;int*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_Option_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_SPARSITY_STATUS</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">status</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">pattern</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">BOOL</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the pattern of the matrix, this is a boolean Matrix where</span>
<span class="sd">        every present value in this matrix is set to True.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_pattern</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_mm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileobj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write this matrix to a file using the Matrix Market format.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_mmwrite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">fileobj</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">to_binfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write this matrix using custom SuiteSparse binary format.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_binwrite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">comments</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">to_lists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Extract the rows, columns and values of the Matrix as 3 lists.&quot;&quot;&quot;</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span><span class="p">)</span>
        <span class="n">J</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span><span class="p">)</span>
        <span class="n">V</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">C</span> <span class="o">+</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index*&quot;</span><span class="p">)</span>
        <span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractTuples</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">I</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">J</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">to_value</span><span class="p">,</span> <span class="n">V</span><span class="p">))]</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clear the matrix.  This does not change the size but removes all</span>
<span class="sd">        values.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_clear</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Resize the matrix.  If the dimensions decrease, entries that fall</span>
<span class="sd">        outside the resized matrix are deleted.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_resize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Transpose matrix. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_dimensions</span> <span class="o">=</span> <span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span>
                <span class="k">else</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">_out</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">cast</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">typ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_new</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="o">*</span><span class="n">new_dimensions</span><span class="p">))</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_transpose</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">cast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cast</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Cast this matrix to the provided type.  If out is not provided, a</span>
<span class="sd">        new matrix is of the cast type is created.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">cast</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">TransposeA</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">eadd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Element-wise addition with other matrix.</span>

<span class="sd">        Element-wise addition applies a binary operator element-wise</span>
<span class="sd">        on two matrices A and B, for all entries that appear in the</span>
<span class="sd">        set intersection of the patterns of A and B.  Other operators</span>
<span class="sd">        other than addition can be used.</span>

<span class="sd">        The pattern of the result of the element-wise addition is</span>
<span class="sd">        the set union of the pattern of A and B. Entries in neither in</span>
<span class="sd">        A nor in B do not appear in the result.</span>

<span class="sd">        The only difference between element-wise multiplication and</span>
<span class="sd">        addition is the pattern of the result, and what happens to</span>
<span class="sd">        entries outside the intersection. With multiplication the</span>
<span class="sd">        pattern of T is the intersection; with addition it is the set</span>
<span class="sd">        union. Entries outside the set intersection are dropped for</span>
<span class="sd">        multiplication, and kept for addition; in both cases the</span>
<span class="sd">        operator is only applied to those (and only those) entries in</span>
<span class="sd">        the intersection. Any binary operator can be used</span>
<span class="sd">        interchangeably for either operation.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">add_op</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">add_op</span> <span class="o">=</span> <span class="n">current_binop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">binaryop</span><span class="o">.</span><span class="n">PLUS</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">add_op</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">add_op</span> <span class="o">=</span> <span class="n">_get_bin_op</span><span class="p">(</span><span class="n">add_op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>

        <span class="n">add_op</span> <span class="o">=</span> <span class="n">add_op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="n">_out</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_new</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">))</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_eWiseAdd_BinaryOp</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">mask</span><span class="p">,</span>
                <span class="n">accum</span><span class="p">,</span>
                <span class="n">add_op</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">desc</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">emult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">mult_op</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Element-wise multiplication with other matrix.</span>

<span class="sd">        Element-wise multiplication applies a binary operator</span>
<span class="sd">        element-wise on two matrices A and B, for all entries that</span>
<span class="sd">        appear in the set intersection of the patterns of A and B.</span>
<span class="sd">        Other operators other than addition can be used.</span>

<span class="sd">        The pattern of the result of the element-wise multiplication</span>
<span class="sd">        is exactly this set intersection. Entries in A but not B, or</span>
<span class="sd">        visa versa, do not appear in the result.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mult_op</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">mult_op</span> <span class="o">=</span> <span class="n">current_binop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">binaryop</span><span class="o">.</span><span class="n">TIMES</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mult_op</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">mult_op</span> <span class="o">=</span> <span class="n">_get_bin_op</span><span class="p">(</span><span class="n">mult_op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>

        <span class="n">mult_op</span> <span class="o">=</span> <span class="n">mult_op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="n">_out</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_new</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">))</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_eWiseMult_BinaryOp</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">mask</span><span class="p">,</span>
                <span class="n">accum</span><span class="p">,</span>
                <span class="n">mult_op</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">desc</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">iseq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compare two matrices for equality.&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;_Bool*&quot;</span><span class="p">)</span>
        <span class="n">eq_op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">EQ</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_isequal</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">eq_op</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">isne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compare two matrices for inequality.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">iseq</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nvals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>
        <span class="n">_nvals</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[1]&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">nvals</span><span class="p">])</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
        <span class="n">J</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
        <span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">nvals</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractTuples</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">_nvals</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="nb">zip</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">to_value</span><span class="p">,</span> <span class="n">X</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">to_arrays</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">typecode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;This matrix has no array typecode.&quot;</span><span class="p">)</span>
        <span class="n">nvals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>
        <span class="n">_nvals</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[1]&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">nvals</span><span class="p">])</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
        <span class="n">J</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
        <span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">nvals</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractTuples</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">_nvals</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">array</span><span class="p">(</span><span class="s2">&quot;L&quot;</span><span class="p">,</span> <span class="n">I</span><span class="p">),</span> <span class="n">array</span><span class="p">(</span><span class="s2">&quot;L&quot;</span><span class="p">,</span> <span class="n">J</span><span class="p">),</span> <span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">typecode</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An iterator of row indexes present in the matrix.&quot;&quot;&quot;</span>
        <span class="n">nvals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>
        <span class="n">_nvals</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[1]&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">nvals</span><span class="p">])</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
        <span class="n">J</span> <span class="o">=</span> <span class="n">NULL</span>
        <span class="n">X</span> <span class="o">=</span> <span class="n">NULL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractTuples</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">_nvals</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="n">I</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cols</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An iterator of column indexes present in the matrix.&quot;&quot;&quot;</span>
        <span class="n">nvals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>
        <span class="n">_nvals</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[1]&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">nvals</span><span class="p">])</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">NULL</span>
        <span class="n">J</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
        <span class="n">X</span> <span class="o">=</span> <span class="n">NULL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractTuples</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">_nvals</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="n">J</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An iterator of values present in the matrix.&quot;&quot;&quot;</span>
        <span class="n">nvals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>
        <span class="n">_nvals</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[1]&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">nvals</span><span class="p">])</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">NULL</span>
        <span class="n">J</span> <span class="o">=</span> <span class="n">NULL</span>
        <span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">nvals</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractTuples</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">_nvals</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>

    <span class="k">def</span> <span class="fm">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">emult</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iand__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">emult</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__ior__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">PLUS</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_first</span><span class="p">(</span>
                <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">PLUS</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">PLUS</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">MINUS</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span>
            <span class="n">other</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">MINUS</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_first</span><span class="p">(</span>
                <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">MINUS</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">MINUS</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">MINUS</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">MINUS</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span>
            <span class="n">other</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_first</span><span class="p">(</span>
                <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">DIV</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">DIV</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__rtruediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_first</span><span class="p">(</span>
                <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">DIV</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">DIV</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__itruediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">DIV</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">DIV</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__invert__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">unaryop</span><span class="o">.</span><span class="n">MINV</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">unaryop</span><span class="o">.</span><span class="n">AINV</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">unaryop</span><span class="o">.</span><span class="n">ABS</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__pow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exponent</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">exponent</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">exponent</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dup</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">exponent</span><span class="p">):</span>
            <span class="n">result</span><span class="o">.</span><span class="n">mxm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">reduce_bool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reduce matrix to a boolean.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mon</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">mon</span> <span class="o">=</span> <span class="n">current_monoid</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">BOOL</span><span class="o">.</span><span class="n">LOR_MONOID</span><span class="p">)</span>
        <span class="n">mon</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">get_monoid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;_Bool*&quot;</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_reduce_BOOL</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">reduce_int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reduce matrix to an integer.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mon</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">mon</span> <span class="o">=</span> <span class="n">current_monoid</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">INT64</span><span class="o">.</span><span class="n">PLUS_MONOID</span><span class="p">)</span>
        <span class="n">mon</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">get_monoid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;int64_t*&quot;</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_reduce_INT64</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">reduce_float</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reduce matrix to an float.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mon</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">mon</span> <span class="o">=</span> <span class="n">current_monoid</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">PLUS_MONOID</span><span class="p">)</span>
        <span class="n">mon</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">get_monoid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;double*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_reduce_FP64</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">reduce_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reduce matrix to a vector.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mon</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">mon</span> <span class="o">=</span> <span class="n">current_monoid</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s2">&quot;PLUS_MONOID&quot;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">))</span>
        <span class="n">mon</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">get_monoid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">Vector</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_reduce_Monoid</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Apply Unary op to matrix elements.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">UnaryOp</span><span class="p">):</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_unaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_apply</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">apply_first</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Apply a binary operator to the entries in a matrix, binding the first input</span>
<span class="sd">        to a scalar first.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">BinaryOp</span><span class="p">):</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">Scalar</span><span class="p">):</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_apply_BinaryOp1st</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_apply_BinaryOp1st</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">apply_second</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Apply a binary operator to the entries in a matrix, binding the second input</span>
<span class="sd">        to a scalar second.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">BinaryOp</span><span class="p">):</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_apply_BinaryOp2nd</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">second</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">_get_select_op</span><span class="p">(</span><span class="n">op</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">thunk</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
            <span class="n">thunk</span> <span class="o">=</span> <span class="n">Scalar</span><span class="o">.</span><span class="n">from_value</span><span class="p">(</span><span class="n">thunk</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">thunk</span><span class="p">,</span> <span class="n">Scalar</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alives</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">]</span> <span class="o">=</span> <span class="n">thunk</span>
            <span class="n">thunk</span> <span class="o">=</span> <span class="n">thunk</span><span class="o">.</span><span class="n">scalar</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_select</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">thunk</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">tril</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_TRIL</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">thunk</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">triu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_TRIU</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">thunk</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">diag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_DIAG</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">thunk</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">offdiag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_OFFDIAG</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">thunk</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">nonzero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_NONZERO</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">full</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identity</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">B</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">identity</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">identity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">one</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_assignScalar</span><span class="p">(</span>
                <span class="n">B</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">identity</span><span class="p">,</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_ALL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_ALL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">NULL</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">FIRST</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">strop</span><span class="p">):</span>
        <span class="n">C</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">BOOL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">op</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
                <span class="n">B</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">dup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="n">B</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">other</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">emult</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">strop</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">C</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">C</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">strop</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">BOOL</span><span class="o">.</span><span class="n">ONE</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">C</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">C</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full</span><span class="p">()</span>
            <span class="n">B</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">full</span><span class="p">()</span>
            <span class="n">A</span><span class="o">.</span><span class="n">emult</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">strop</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">C</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">C</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Unknown matrix comparison type.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">gt</span><span class="p">,</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">lt</span><span class="p">,</span> <span class="s2">&quot;&lt;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">ge</span><span class="p">,</span> <span class="s2">&quot;&gt;=&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">le</span><span class="p">,</span> <span class="s2">&quot;&lt;=&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">eq</span><span class="p">,</span> <span class="s2">&quot;==&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">ne</span><span class="p">,</span> <span class="s2">&quot;!=&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">Vector</span><span class="p">):</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">accum</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">accum</span> <span class="o">=</span> <span class="n">current_accum</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">NULL</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">accum</span><span class="p">,</span> <span class="n">BinaryOp</span><span class="p">):</span>
            <span class="n">accum</span> <span class="o">=</span> <span class="n">accum</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">desc</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">desc</span> <span class="o">=</span> <span class="n">current_desc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">Default</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">desc</span><span class="p">,</span> <span class="n">Descriptor</span><span class="p">):</span>
            <span class="n">desc</span> <span class="o">=</span> <span class="n">desc</span><span class="o">.</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span>

    <span class="k">def</span> <span class="nf">mxm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">semiring</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Matrix-matrix multiply.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">semiring</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">semiring</span> <span class="o">=</span> <span class="n">current_semiring</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">semiring</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">semiring</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">semiring</span> <span class="o">=</span> <span class="n">typ</span><span class="o">.</span><span class="n">PLUS_TIMES</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_mxm</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">mask</span><span class="p">,</span>
                <span class="n">accum</span><span class="p">,</span>
                <span class="n">semiring</span><span class="o">.</span><span class="n">get_semiring</span><span class="p">(</span><span class="n">typ</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">desc</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">mxv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">semiring</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Matrix-vector multiply.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">semiring</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">semiring</span> <span class="o">=</span> <span class="n">current_semiring</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">semiring</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_dimension</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
            <span class="p">)</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">Vector</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">new_dimension</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">semiring</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">semiring</span> <span class="o">=</span> <span class="n">typ</span><span class="o">.</span><span class="n">PLUS_TIMES</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_mxv</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">mask</span><span class="p">,</span>
                <span class="n">accum</span><span class="p">,</span>
                <span class="n">semiring</span><span class="o">.</span><span class="n">get_semiring</span><span class="p">(</span><span class="n">typ</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">other</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">desc</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="fm">__matmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mxm</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Vector</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mxv</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Right argument to @ must be Matrix or Vector.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__imatmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mxm</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">kronecker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Kronecker product.&quot;&quot;&quot;</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span>
                <span class="n">typ</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">ncols</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">op</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">typ</span><span class="o">.</span><span class="n">TIMES</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">BinaryOp</span><span class="p">):</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_kronecker_BinaryOp</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="n">kron</span> <span class="o">=</span> <span class="n">kronecker</span>  <span class="c1"># new v1.3 name</span>

    <span class="k">def</span> <span class="nf">extract_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rindex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cindex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Slice a submatrix.&quot;&quot;&quot;</span>
        <span class="n">ta</span> <span class="o">=</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">result_nrows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="k">if</span> <span class="n">ta</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
        <span class="n">result_ncols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="k">if</span> <span class="n">ta</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span>

        <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">isize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">rindex</span><span class="p">,</span> <span class="n">result_nrows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">jsize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">cindex</span><span class="p">,</span> <span class="n">result_ncols</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">isize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">isize</span> <span class="o">=</span> <span class="n">result_nrows</span>
        <span class="k">if</span> <span class="n">jsize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">jsize</span> <span class="o">=</span> <span class="n">result_ncols</span>

        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">isize</span><span class="p">,</span> <span class="n">jsize</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_extract</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">extract_col</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">row_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Slice a column as subvector.</span>
<span class="sd">        Use `desc=TransposeA` to slice a row.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stop_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">Vector</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">stop_val</span><span class="p">)</span>

        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">row_slice</span><span class="p">,</span> <span class="n">stop_val</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Col_extract</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">extract_row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">col_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Slice a row as subvector.&quot;&quot;&quot;</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="n">TransposeA</span>
        <span class="k">if</span> <span class="s2">&quot;desc&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">desc</span> <span class="o">=</span> <span class="n">desc</span> <span class="o">|</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;desc&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_col</span><span class="p">(</span><span class="n">row_index</span><span class="p">,</span> <span class="n">col_slice</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># a[3] extract single row</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_row</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="c1"># a[3:] extract submatrix of rows</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_matrix</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_matrix</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span>

        <span class="n">i0</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">i1</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># a[3,3] extract single element</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ptr</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractElement</span><span class="p">(</span>
                    <span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">to_value</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="c1"># a[3,:] extract slice of row vector</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_row</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="n">i1</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="nb">slice</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># a[:,3] extract slice of col vector</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_col</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">i0</span><span class="p">)</span>

        <span class="c1"># a[:,:] or a[[0,1,2], [3,4,5]] extract submatrix with slice or row/col indices</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_matrix</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="n">i1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">assign_col</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">row_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assign a vector to a column.&quot;&quot;&quot;</span>
        <span class="n">stop_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
        <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">row_slice</span><span class="p">,</span> <span class="n">stop_val</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Col_assign</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">assign_row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">col_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assign a vector to a row.&quot;&quot;&quot;</span>
        <span class="n">stop_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span>
        <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">col_slice</span><span class="p">,</span> <span class="n">stop_val</span><span class="p">)</span>

        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Row_assign</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">assign_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">rindex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cindex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assign a submatrix.&quot;&quot;&quot;</span>
        <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">isize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">rindex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">jsize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">cindex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">isize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">isize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
        <span class="k">if</span> <span class="n">jsize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">jsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span>

        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_assign</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">assign_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">row_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">col_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">row_slice</span><span class="p">:</span>
            <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">isize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">row_slice</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">I</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_ALL</span>
            <span class="n">ni</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">col_slice</span><span class="p">:</span>
            <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">jsize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">col_slice</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">J</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_ALL</span>
            <span class="n">nj</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">scalar_type</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">_gb_from_type</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">scalar_type</span><span class="o">.</span><span class="n">Matrix_assignScalar</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># A[3] = assign single row  vector</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Vector</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assign_row</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="c1"># A[3:] = assign submatrix to rows</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assign_matrix</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assign_scalar</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
                <span class="c1"># A[M] = B masked matrix assignment</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span>
            <span class="c1"># A[M] = s masked scalar assignment</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assign_scalar</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span>

        <span class="n">i0</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">i1</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">from_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_setElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="n">i0</span><span class="p">,</span> <span class="n">i1</span><span class="p">))</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="c1"># a[3,:] assign slice of row vector or scalar</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assign_row</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">i1</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="nb">slice</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># a[:,3] extract slice of col vector or scalar</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assign_col</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">i0</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="nb">slice</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assign_scalar</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">i0</span><span class="p">,</span> <span class="n">i1</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="c1"># a[:,:] assign submatrix</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assign_matrix</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">i0</span><span class="p">,</span> <span class="n">i1</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
            <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">)</span>
            <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">int</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;__delitem__ currently only supports single element removal&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_removeElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">NoValue</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>
        <span class="k">except</span> <span class="n">NoValue</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default</span>

    <span class="k">def</span> <span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_wait</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_string</span><span class="o">=</span><span class="s2">&quot;{:&gt;</span><span class="si">%s</span><span class="s2">}&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">empty_char</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="n">format_string</span> <span class="o">=</span> <span class="n">format_string</span> <span class="o">%</span> <span class="n">width</span>
        <span class="n">header</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="o">+</span> <span class="s2">&quot; &quot;</span>
            <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;|&quot;</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">empty_char</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">format_value</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;|&quot;</span> <span class="o">+</span> <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">header</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;Matrix (</span><span class="si">%s</span><span class="s2">x</span><span class="si">%s</span><span class="s2"> : </span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">)&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_scipy_sparse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;csr&quot;</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">sparse</span>

        <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">vals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_arrays</span><span class="p">()</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">coo_matrix</span><span class="p">((</span><span class="n">vals</span><span class="p">,</span> <span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">)),</span> <span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;coo&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">s</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;bsr&quot;</span><span class="p">,</span> <span class="s2">&quot;csr&quot;</span><span class="p">,</span> <span class="s2">&quot;csc&quot;</span><span class="p">,</span> <span class="s2">&quot;coo&quot;</span><span class="p">,</span> <span class="s2">&quot;lil&quot;</span><span class="p">,</span> <span class="s2">&quot;dia&quot;</span><span class="p">,</span> <span class="s2">&quot;dok&quot;</span><span class="p">}:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid format: </span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">asformat</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_numpy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_scipy_sparse</span><span class="p">(</span><span class="s2">&quot;coo&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">toarray</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">to_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

        <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">im</span><span class="o">.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="mi">1024</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">im</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">


    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="pygraphblas.matrix.Matrix" class="name">class <span class="ident">Matrix</span></p>
      
  
    <div class="desc"><p>GraphBLAS Sparse Matrix</p>
<p>This is a high-level wrapper around the GrB_Matrix type.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Matrix</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;GraphBLAS Sparse Matrix</span>

<span class="sd">    This is a high-level wrapper around the GrB_Matrix type.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;matrix&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;_funcs&quot;</span><span class="p">,</span> <span class="s2">&quot;_keep_alives&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">raise_no_val</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">res</span> <span class="o">!=</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_SUCCESS</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">raise_no_val</span> <span class="ow">and</span> <span class="n">res</span> <span class="o">==</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_NO_VALUE</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">KeyError</span>

            <span class="n">error_string</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;char**&quot;</span><span class="p">)</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_error</span><span class="p">(</span><span class="n">error_string</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">raise</span> <span class="n">_error_codes</span><span class="p">[</span><span class="n">res</span><span class="p">](</span><span class="n">ffi</span><span class="o">.</span><span class="n">string</span><span class="p">(</span><span class="n">error_string</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrix</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">typ</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_type</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Type*&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_type</span><span class="p">(</span><span class="n">new_type</span><span class="p">,</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

            <span class="n">typ</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">gb_type_to_type</span><span class="p">(</span><span class="n">new_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">matrix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">typ</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alives</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakKeyDictionary</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_free</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">sparse</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create an empty Matrix from the given type, number of rows, and</span>
<span class="sd">        number of columns.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_mat</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_new</span><span class="p">(</span><span class="n">new_mat</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">))</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">new_mat</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">dense</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">nrows</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">ncols</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;dense matrix must be at least 1x1&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fill</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fill</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">zero</span>
        <span class="n">m</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">fill</span>
        <span class="k">return</span> <span class="n">m</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_lists</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new matrix from the given lists of row indices, column</span>
<span class="sd">        indices, and values.  If nrows or ncols are not provided, they</span>
<span class="sd">        are computed from the max values of the provides row and</span>
<span class="sd">        column indices lists.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">I</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">J</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">nrows</span><span class="p">:</span>
            <span class="n">nrows</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">I</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ncols</span><span class="p">:</span>
            <span class="n">ncols</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">J</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="c1"># TODO use ffi and GrB_Matrix_build</span>
        <span class="k">if</span> <span class="n">typ</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">typ</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">_gb_from_type</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">V</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">V</span><span class="p">):</span>
            <span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">return</span> <span class="n">m</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_mm</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">mm_file</span><span class="p">,</span> <span class="n">typ</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new matrix by reading a Matrix Market file.&quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
        <span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_mmread</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">mm_file</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">i</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_tsv</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tsv_file</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new matrix by reading a tab separated value file.&quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
        <span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_tsvread</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">tsv_file</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">i</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_binfile</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">bin_file</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new matrix by reading a SuiteSparse specific binary file.&quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_binread</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">bin_file</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">random</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">typ</span><span class="p">,</span>
        <span class="n">nrows</span><span class="p">,</span>
        <span class="n">ncols</span><span class="p">,</span>
        <span class="n">nvals</span><span class="p">,</span>
        <span class="n">make_pattern</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">make_symmetric</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">make_skew_symmetric</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">make_hermitian</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">no_diagonal</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new random Matrix of the given type, number of rows,</span>
<span class="sd">        columns and values.  Other flags set additional properties the</span>
<span class="sd">        matrix will hold.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
        <span class="n">fseed</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;uint64_t*&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">seed</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">seed</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="p">)</span>
        <span class="n">fseed</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">seed</span>
        <span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_random</span><span class="p">(</span>
                <span class="n">result</span><span class="p">,</span>
                <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span>
                <span class="n">nrows</span><span class="p">,</span>
                <span class="n">ncols</span><span class="p">,</span>
                <span class="n">nvals</span><span class="p">,</span>
                <span class="n">make_pattern</span><span class="p">,</span>
                <span class="n">make_symmetric</span><span class="p">,</span>
                <span class="n">make_skew_symmetric</span><span class="p">,</span>
                <span class="n">make_hermitian</span><span class="p">,</span>
                <span class="n">no_diagonal</span><span class="p">,</span>
                <span class="n">fseed</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">i</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">identity</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">nrows</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">one</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">one</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">one</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nrows</span><span class="p">):</span>
            <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">one</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gb_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the GraphBLAS low-level type object of the Matrix.&quot;&quot;&quot;</span>
        <span class="n">new_type</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Type*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_type</span><span class="p">(</span><span class="n">new_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">new_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nrows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the number of Matrix rows.&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_nrows</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ncols</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the number of Matrix columns.&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_ncols</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">shape</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Numpy-like description of matrix shape.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nvals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the number of Matrix values.&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_nvals</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">T</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">dup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create an duplicate Matrix.&quot;&quot;&quot;</span>
        <span class="n">new_mat</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_dup</span><span class="p">(</span><span class="n">new_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">new_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hyper_switch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">switch</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;double*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_Option_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_HYPER_SWITCH</span><span class="p">,</span> <span class="n">switch</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">switch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@hyper_switch</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">hyper_switch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">switch</span><span class="p">):</span>
        <span class="n">switch</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;double&quot;</span><span class="p">,</span> <span class="n">switch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_Option_set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_HYPER_SWITCH</span><span class="p">,</span> <span class="n">switch</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">format</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GxB_Format_Value*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_Option_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_FORMAT</span><span class="p">,</span> <span class="nb">format</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">format</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@format</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="p">):</span>
        <span class="nb">format</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;GxB_Format_Value&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_Option_set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_FORMAT</span><span class="p">,</span> <span class="nb">format</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sparsity_control</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sparsity</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;int*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_Option_get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_SPARSITY_CONTROL</span><span class="p">,</span> <span class="n">sparsity</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">sparsity</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@sparsity_control</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">sparsity_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sparsity</span><span class="p">):</span>
        <span class="n">sparsity</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="n">sparsity</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_Option_set</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_SPARSITY_CONTROL</span><span class="p">,</span> <span class="n">sparsity</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sparsity_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;int*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_Option_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_SPARSITY_STATUS</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">status</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">pattern</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">BOOL</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the pattern of the matrix, this is a boolean Matrix where</span>
<span class="sd">        every present value in this matrix is set to True.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_pattern</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_mm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileobj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write this matrix to a file using the Matrix Market format.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_mmwrite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">fileobj</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">to_binfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write this matrix using custom SuiteSparse binary format.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_binwrite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">comments</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">to_lists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Extract the rows, columns and values of the Matrix as 3 lists.&quot;&quot;&quot;</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span><span class="p">)</span>
        <span class="n">J</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span><span class="p">)</span>
        <span class="n">V</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">C</span> <span class="o">+</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index*&quot;</span><span class="p">)</span>
        <span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractTuples</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">I</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">J</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">to_value</span><span class="p">,</span> <span class="n">V</span><span class="p">))]</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clear the matrix.  This does not change the size but removes all</span>
<span class="sd">        values.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_clear</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Resize the matrix.  If the dimensions decrease, entries that fall</span>
<span class="sd">        outside the resized matrix are deleted.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_resize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Transpose matrix. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_dimensions</span> <span class="o">=</span> <span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span>
                <span class="k">else</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">_out</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">cast</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">typ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_new</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="o">*</span><span class="n">new_dimensions</span><span class="p">))</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_transpose</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">cast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cast</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Cast this matrix to the provided type.  If out is not provided, a</span>
<span class="sd">        new matrix is of the cast type is created.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">cast</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">TransposeA</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">eadd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Element-wise addition with other matrix.</span>

<span class="sd">        Element-wise addition applies a binary operator element-wise</span>
<span class="sd">        on two matrices A and B, for all entries that appear in the</span>
<span class="sd">        set intersection of the patterns of A and B.  Other operators</span>
<span class="sd">        other than addition can be used.</span>

<span class="sd">        The pattern of the result of the element-wise addition is</span>
<span class="sd">        the set union of the pattern of A and B. Entries in neither in</span>
<span class="sd">        A nor in B do not appear in the result.</span>

<span class="sd">        The only difference between element-wise multiplication and</span>
<span class="sd">        addition is the pattern of the result, and what happens to</span>
<span class="sd">        entries outside the intersection. With multiplication the</span>
<span class="sd">        pattern of T is the intersection; with addition it is the set</span>
<span class="sd">        union. Entries outside the set intersection are dropped for</span>
<span class="sd">        multiplication, and kept for addition; in both cases the</span>
<span class="sd">        operator is only applied to those (and only those) entries in</span>
<span class="sd">        the intersection. Any binary operator can be used</span>
<span class="sd">        interchangeably for either operation.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">add_op</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">add_op</span> <span class="o">=</span> <span class="n">current_binop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">binaryop</span><span class="o">.</span><span class="n">PLUS</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">add_op</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">add_op</span> <span class="o">=</span> <span class="n">_get_bin_op</span><span class="p">(</span><span class="n">add_op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>

        <span class="n">add_op</span> <span class="o">=</span> <span class="n">add_op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="n">_out</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_new</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">))</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_eWiseAdd_BinaryOp</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">mask</span><span class="p">,</span>
                <span class="n">accum</span><span class="p">,</span>
                <span class="n">add_op</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">desc</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">emult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">mult_op</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Element-wise multiplication with other matrix.</span>

<span class="sd">        Element-wise multiplication applies a binary operator</span>
<span class="sd">        element-wise on two matrices A and B, for all entries that</span>
<span class="sd">        appear in the set intersection of the patterns of A and B.</span>
<span class="sd">        Other operators other than addition can be used.</span>

<span class="sd">        The pattern of the result of the element-wise multiplication</span>
<span class="sd">        is exactly this set intersection. Entries in A but not B, or</span>
<span class="sd">        visa versa, do not appear in the result.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mult_op</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">mult_op</span> <span class="o">=</span> <span class="n">current_binop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">binaryop</span><span class="o">.</span><span class="n">TIMES</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mult_op</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">mult_op</span> <span class="o">=</span> <span class="n">_get_bin_op</span><span class="p">(</span><span class="n">mult_op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>

        <span class="n">mult_op</span> <span class="o">=</span> <span class="n">mult_op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="n">_out</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_new</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">))</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_eWiseMult_BinaryOp</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">mask</span><span class="p">,</span>
                <span class="n">accum</span><span class="p">,</span>
                <span class="n">mult_op</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">desc</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">iseq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compare two matrices for equality.&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;_Bool*&quot;</span><span class="p">)</span>
        <span class="n">eq_op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">EQ</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_isequal</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">eq_op</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">isne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compare two matrices for inequality.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">iseq</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nvals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>
        <span class="n">_nvals</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[1]&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">nvals</span><span class="p">])</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
        <span class="n">J</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
        <span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">nvals</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractTuples</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">_nvals</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="nb">zip</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">to_value</span><span class="p">,</span> <span class="n">X</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">to_arrays</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">typecode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;This matrix has no array typecode.&quot;</span><span class="p">)</span>
        <span class="n">nvals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>
        <span class="n">_nvals</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[1]&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">nvals</span><span class="p">])</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
        <span class="n">J</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
        <span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">nvals</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractTuples</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">_nvals</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">array</span><span class="p">(</span><span class="s2">&quot;L&quot;</span><span class="p">,</span> <span class="n">I</span><span class="p">),</span> <span class="n">array</span><span class="p">(</span><span class="s2">&quot;L&quot;</span><span class="p">,</span> <span class="n">J</span><span class="p">),</span> <span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">typecode</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An iterator of row indexes present in the matrix.&quot;&quot;&quot;</span>
        <span class="n">nvals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>
        <span class="n">_nvals</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[1]&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">nvals</span><span class="p">])</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
        <span class="n">J</span> <span class="o">=</span> <span class="n">NULL</span>
        <span class="n">X</span> <span class="o">=</span> <span class="n">NULL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractTuples</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">_nvals</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="n">I</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cols</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An iterator of column indexes present in the matrix.&quot;&quot;&quot;</span>
        <span class="n">nvals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>
        <span class="n">_nvals</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[1]&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">nvals</span><span class="p">])</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">NULL</span>
        <span class="n">J</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
        <span class="n">X</span> <span class="o">=</span> <span class="n">NULL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractTuples</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">_nvals</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="n">J</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An iterator of values present in the matrix.&quot;&quot;&quot;</span>
        <span class="n">nvals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>
        <span class="n">_nvals</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[1]&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">nvals</span><span class="p">])</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">NULL</span>
        <span class="n">J</span> <span class="o">=</span> <span class="n">NULL</span>
        <span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">nvals</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractTuples</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">_nvals</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>

    <span class="k">def</span> <span class="fm">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">emult</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iand__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">emult</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__ior__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">PLUS</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_first</span><span class="p">(</span>
                <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">PLUS</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">PLUS</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">MINUS</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span>
            <span class="n">other</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">MINUS</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_first</span><span class="p">(</span>
                <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">MINUS</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">MINUS</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">MINUS</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">MINUS</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span>
            <span class="n">other</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_first</span><span class="p">(</span>
                <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">DIV</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">DIV</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__rtruediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_first</span><span class="p">(</span>
                <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">DIV</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">DIV</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__itruediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_second</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">DIV</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">DIV</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">accum</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__invert__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">unaryop</span><span class="o">.</span><span class="n">MINV</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">unaryop</span><span class="o">.</span><span class="n">AINV</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">unaryop</span><span class="o">.</span><span class="n">ABS</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__pow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exponent</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">exponent</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">exponent</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dup</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">exponent</span><span class="p">):</span>
            <span class="n">result</span><span class="o">.</span><span class="n">mxm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">reduce_bool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reduce matrix to a boolean.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mon</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">mon</span> <span class="o">=</span> <span class="n">current_monoid</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">BOOL</span><span class="o">.</span><span class="n">LOR_MONOID</span><span class="p">)</span>
        <span class="n">mon</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">get_monoid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;_Bool*&quot;</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_reduce_BOOL</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">reduce_int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reduce matrix to an integer.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mon</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">mon</span> <span class="o">=</span> <span class="n">current_monoid</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">INT64</span><span class="o">.</span><span class="n">PLUS_MONOID</span><span class="p">)</span>
        <span class="n">mon</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">get_monoid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;int64_t*&quot;</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_reduce_INT64</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">reduce_float</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reduce matrix to an float.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mon</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">mon</span> <span class="o">=</span> <span class="n">current_monoid</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">PLUS_MONOID</span><span class="p">)</span>
        <span class="n">mon</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">get_monoid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;double*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_reduce_FP64</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">reduce_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reduce matrix to a vector.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mon</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">mon</span> <span class="o">=</span> <span class="n">current_monoid</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s2">&quot;PLUS_MONOID&quot;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">))</span>
        <span class="n">mon</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">get_monoid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">Vector</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_reduce_Monoid</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Apply Unary op to matrix elements.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">UnaryOp</span><span class="p">):</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_unaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_apply</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">apply_first</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Apply a binary operator to the entries in a matrix, binding the first input</span>
<span class="sd">        to a scalar first.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">BinaryOp</span><span class="p">):</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">Scalar</span><span class="p">):</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_apply_BinaryOp1st</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_apply_BinaryOp1st</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">apply_second</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Apply a binary operator to the entries in a matrix, binding the second input</span>
<span class="sd">        to a scalar second.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">BinaryOp</span><span class="p">):</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_apply_BinaryOp2nd</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">second</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">_get_select_op</span><span class="p">(</span><span class="n">op</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">thunk</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
            <span class="n">thunk</span> <span class="o">=</span> <span class="n">Scalar</span><span class="o">.</span><span class="n">from_value</span><span class="p">(</span><span class="n">thunk</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">thunk</span><span class="p">,</span> <span class="n">Scalar</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alives</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">]</span> <span class="o">=</span> <span class="n">thunk</span>
            <span class="n">thunk</span> <span class="o">=</span> <span class="n">thunk</span><span class="o">.</span><span class="n">scalar</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_select</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">thunk</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">tril</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_TRIL</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">thunk</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">triu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_TRIU</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">thunk</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">diag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_DIAG</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">thunk</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">offdiag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_OFFDIAG</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">thunk</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">nonzero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_NONZERO</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">full</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identity</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">B</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">identity</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">identity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">one</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_assignScalar</span><span class="p">(</span>
                <span class="n">B</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">identity</span><span class="p">,</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_ALL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_ALL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">NULL</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">FIRST</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">strop</span><span class="p">):</span>
        <span class="n">C</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">BOOL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">op</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
                <span class="n">B</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">dup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="n">B</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">other</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">emult</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">strop</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">C</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">C</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">strop</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">BOOL</span><span class="o">.</span><span class="n">ONE</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">C</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">C</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full</span><span class="p">()</span>
            <span class="n">B</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">full</span><span class="p">()</span>
            <span class="n">A</span><span class="o">.</span><span class="n">emult</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">strop</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">C</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">C</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Unknown matrix comparison type.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">gt</span><span class="p">,</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">lt</span><span class="p">,</span> <span class="s2">&quot;&lt;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">ge</span><span class="p">,</span> <span class="s2">&quot;&gt;=&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">le</span><span class="p">,</span> <span class="s2">&quot;&lt;=&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">eq</span><span class="p">,</span> <span class="s2">&quot;==&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">ne</span><span class="p">,</span> <span class="s2">&quot;!=&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">Vector</span><span class="p">):</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">accum</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">accum</span> <span class="o">=</span> <span class="n">current_accum</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">NULL</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">accum</span><span class="p">,</span> <span class="n">BinaryOp</span><span class="p">):</span>
            <span class="n">accum</span> <span class="o">=</span> <span class="n">accum</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">desc</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">desc</span> <span class="o">=</span> <span class="n">current_desc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">Default</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">desc</span><span class="p">,</span> <span class="n">Descriptor</span><span class="p">):</span>
            <span class="n">desc</span> <span class="o">=</span> <span class="n">desc</span><span class="o">.</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span>

    <span class="k">def</span> <span class="nf">mxm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">semiring</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Matrix-matrix multiply.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">semiring</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">semiring</span> <span class="o">=</span> <span class="n">current_semiring</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">semiring</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">semiring</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">semiring</span> <span class="o">=</span> <span class="n">typ</span><span class="o">.</span><span class="n">PLUS_TIMES</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_mxm</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">mask</span><span class="p">,</span>
                <span class="n">accum</span><span class="p">,</span>
                <span class="n">semiring</span><span class="o">.</span><span class="n">get_semiring</span><span class="p">(</span><span class="n">typ</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">desc</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">mxv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">semiring</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Matrix-vector multiply.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">semiring</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">semiring</span> <span class="o">=</span> <span class="n">current_semiring</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">semiring</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_dimension</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
            <span class="p">)</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">Vector</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">new_dimension</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">semiring</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">semiring</span> <span class="o">=</span> <span class="n">typ</span><span class="o">.</span><span class="n">PLUS_TIMES</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_mxv</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">mask</span><span class="p">,</span>
                <span class="n">accum</span><span class="p">,</span>
                <span class="n">semiring</span><span class="o">.</span><span class="n">get_semiring</span><span class="p">(</span><span class="n">typ</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">other</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">desc</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="fm">__matmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mxm</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Vector</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mxv</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Right argument to @ must be Matrix or Vector.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__imatmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mxm</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">kronecker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Kronecker product.&quot;&quot;&quot;</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span>
                <span class="n">typ</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">ncols</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">op</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">typ</span><span class="o">.</span><span class="n">TIMES</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">BinaryOp</span><span class="p">):</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_kronecker_BinaryOp</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="n">kron</span> <span class="o">=</span> <span class="n">kronecker</span>  <span class="c1"># new v1.3 name</span>

    <span class="k">def</span> <span class="nf">extract_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rindex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cindex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Slice a submatrix.&quot;&quot;&quot;</span>
        <span class="n">ta</span> <span class="o">=</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">result_nrows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="k">if</span> <span class="n">ta</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
        <span class="n">result_ncols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="k">if</span> <span class="n">ta</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span>

        <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">isize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">rindex</span><span class="p">,</span> <span class="n">result_nrows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">jsize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">cindex</span><span class="p">,</span> <span class="n">result_ncols</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">isize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">isize</span> <span class="o">=</span> <span class="n">result_nrows</span>
        <span class="k">if</span> <span class="n">jsize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">jsize</span> <span class="o">=</span> <span class="n">result_ncols</span>

        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">isize</span><span class="p">,</span> <span class="n">jsize</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_extract</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">extract_col</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">row_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Slice a column as subvector.</span>
<span class="sd">        Use `desc=TransposeA` to slice a row.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stop_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">Vector</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">stop_val</span><span class="p">)</span>

        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">row_slice</span><span class="p">,</span> <span class="n">stop_val</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Col_extract</span><span class="p">(</span>
                <span class="n">out</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">extract_row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">col_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Slice a row as subvector.&quot;&quot;&quot;</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="n">TransposeA</span>
        <span class="k">if</span> <span class="s2">&quot;desc&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">desc</span> <span class="o">=</span> <span class="n">desc</span> <span class="o">|</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;desc&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_col</span><span class="p">(</span><span class="n">row_index</span><span class="p">,</span> <span class="n">col_slice</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># a[3] extract single row</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_row</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="c1"># a[3:] extract submatrix of rows</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_matrix</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_matrix</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span>

        <span class="n">i0</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">i1</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># a[3,3] extract single element</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ptr</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractElement</span><span class="p">(</span>
                    <span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">to_value</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="c1"># a[3,:] extract slice of row vector</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_row</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="n">i1</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="nb">slice</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># a[:,3] extract slice of col vector</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_col</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">i0</span><span class="p">)</span>

        <span class="c1"># a[:,:] or a[[0,1,2], [3,4,5]] extract submatrix with slice or row/col indices</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_matrix</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="n">i1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">assign_col</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">row_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assign a vector to a column.&quot;&quot;&quot;</span>
        <span class="n">stop_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
        <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">row_slice</span><span class="p">,</span> <span class="n">stop_val</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Col_assign</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">assign_row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">col_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assign a vector to a row.&quot;&quot;&quot;</span>
        <span class="n">stop_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span>
        <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">col_slice</span><span class="p">,</span> <span class="n">stop_val</span><span class="p">)</span>

        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Row_assign</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">assign_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">rindex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cindex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assign a submatrix.&quot;&quot;&quot;</span>
        <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">isize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">rindex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">jsize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">cindex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">isize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">isize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
        <span class="k">if</span> <span class="n">jsize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">jsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span>

        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_assign</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">assign_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">row_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">col_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">row_slice</span><span class="p">:</span>
            <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">isize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">row_slice</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">I</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_ALL</span>
            <span class="n">ni</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">col_slice</span><span class="p">:</span>
            <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">jsize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">col_slice</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">J</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_ALL</span>
            <span class="n">nj</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">scalar_type</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">_gb_from_type</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
            <span class="n">scalar_type</span><span class="o">.</span><span class="n">Matrix_assignScalar</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">desc</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># A[3] = assign single row  vector</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Vector</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assign_row</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="c1"># A[3:] = assign submatrix to rows</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assign_matrix</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assign_scalar</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
                <span class="c1"># A[M] = B masked matrix assignment</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span>
            <span class="c1"># A[M] = s masked scalar assignment</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assign_scalar</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span>

        <span class="n">i0</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">i1</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">from_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_setElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="n">i0</span><span class="p">,</span> <span class="n">i1</span><span class="p">))</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="c1"># a[3,:] assign slice of row vector or scalar</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assign_row</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">i1</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="nb">slice</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># a[:,3] extract slice of col vector or scalar</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assign_col</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">i0</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i0</span><span class="p">,</span> <span class="nb">slice</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assign_scalar</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">i0</span><span class="p">,</span> <span class="n">i1</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="c1"># a[:,:] assign submatrix</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assign_matrix</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">i0</span><span class="p">,</span> <span class="n">i1</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
            <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">)</span>
            <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">int</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;__delitem__ currently only supports single element removal&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_removeElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">NoValue</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>
        <span class="k">except</span> <span class="n">NoValue</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default</span>

    <span class="k">def</span> <span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_wait</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_string</span><span class="o">=</span><span class="s2">&quot;{:&gt;</span><span class="si">%s</span><span class="s2">}&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">empty_char</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="n">format_string</span> <span class="o">=</span> <span class="n">format_string</span> <span class="o">%</span> <span class="n">width</span>
        <span class="n">header</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="o">+</span> <span class="s2">&quot; &quot;</span>
            <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;|&quot;</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">empty_char</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">format_value</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;|&quot;</span> <span class="o">+</span> <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">header</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;Matrix (</span><span class="si">%s</span><span class="s2">x</span><span class="si">%s</span><span class="s2"> : </span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">)&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_scipy_sparse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;csr&quot;</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">sparse</span>

        <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">vals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_arrays</span><span class="p">()</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">coo_matrix</span><span class="p">((</span><span class="n">vals</span><span class="p">,</span> <span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">)),</span> <span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;coo&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">s</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;bsr&quot;</span><span class="p">,</span> <span class="s2">&quot;csr&quot;</span><span class="p">,</span> <span class="s2">&quot;csc&quot;</span><span class="p">,</span> <span class="s2">&quot;coo&quot;</span><span class="p">,</span> <span class="s2">&quot;lil&quot;</span><span class="p">,</span> <span class="s2">&quot;dia&quot;</span><span class="p">,</span> <span class="s2">&quot;dok&quot;</span><span class="p">}:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid format: </span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">asformat</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_numpy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_scipy_sparse</span><span class="p">(</span><span class="s2">&quot;coo&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">toarray</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">to_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

        <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">im</span><span class="o">.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="mi">1024</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">im</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#pygraphblas.matrix.Matrix">Matrix</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, matrix, typ=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.__init__', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrix</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">typ</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">new_type</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Type*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_type</span><span class="p">(</span><span class="n">new_type</span><span class="p">,</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">typ</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">gb_type_to_type</span><span class="p">(</span><span class="n">new_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">matrix</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">typ</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alives</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakKeyDictionary</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.apply">
    <p>def <span class="ident">apply</span>(</p><p>self, op, out=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Apply Unary op to matrix elements.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.apply', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.apply" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Apply Unary op to matrix elements.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">UnaryOp</span><span class="p">):</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_unaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_apply</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.apply_first">
    <p>def <span class="ident">apply_first</span>(</p><p>self, first, op, out=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Apply a binary operator to the entries in a matrix, binding the first input
to a scalar first.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.apply_first', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.apply_first" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_first</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Apply a binary operator to the entries in a matrix, binding the first input</span>
<span class="sd">    to a scalar first.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">BinaryOp</span><span class="p">):</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">Scalar</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_apply_BinaryOp1st</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_apply_BinaryOp1st</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.apply_second">
    <p>def <span class="ident">apply_second</span>(</p><p>self, op, second, out=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Apply a binary operator to the entries in a matrix, binding the second input
to a scalar second.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.apply_second', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.apply_second" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_second</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Apply a binary operator to the entries in a matrix, binding the second input</span>
<span class="sd">    to a scalar second.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">BinaryOp</span><span class="p">):</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_apply_BinaryOp2nd</span><span class="p">(</span>
            <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">second</span><span class="p">,</span> <span class="n">desc</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.assign_col">
    <p>def <span class="ident">assign_col</span>(</p><p>self, col_index, value, row_slice=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Assign a vector to a column.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.assign_col', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.assign_col" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">assign_col</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">row_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Assign a vector to a column.&quot;&quot;&quot;</span>
    <span class="n">stop_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
    <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">row_slice</span><span class="p">,</span> <span class="n">stop_val</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Col_assign</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">desc</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.assign_matrix">
    <p>def <span class="ident">assign_matrix</span>(</p><p>self, value, rindex=None, cindex=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Assign a submatrix.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.assign_matrix', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.assign_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">assign_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">rindex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cindex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Assign a submatrix.&quot;&quot;&quot;</span>
    <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">isize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">rindex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">jsize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">cindex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">isize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">isize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
    <span class="k">if</span> <span class="n">jsize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">jsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_assign</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">desc</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.assign_row">
    <p>def <span class="ident">assign_row</span>(</p><p>self, row_index, value, col_slice=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Assign a vector to a row.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.assign_row', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.assign_row" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">assign_row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">col_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Assign a vector to a row.&quot;&quot;&quot;</span>
    <span class="n">stop_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span>
    <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">col_slice</span><span class="p">,</span> <span class="n">stop_val</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Row_assign</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">desc</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.assign_scalar">
    <p>def <span class="ident">assign_scalar</span>(</p><p>self, value, row_slice=None, col_slice=None, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.assign_scalar', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.assign_scalar" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">assign_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">row_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">col_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">row_slice</span><span class="p">:</span>
        <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">isize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">row_slice</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_ALL</span>
        <span class="n">ni</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">col_slice</span><span class="p">:</span>
        <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">jsize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">col_slice</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">J</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_ALL</span>
        <span class="n">nj</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">scalar_type</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">_gb_from_type</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">scalar_type</span><span class="o">.</span><span class="n">Matrix_assignScalar</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">desc</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.cast">
    <p>def <span class="ident">cast</span>(</p><p>self, cast, out=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Cast this matrix to the provided type.  If out is not provided, a
new matrix is of the cast type is created.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.cast', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.cast" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cast</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Cast this matrix to the provided type.  If out is not provided, a</span>
<span class="sd">    new matrix is of the cast type is created.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">cast</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">TransposeA</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.clear">
    <p>def <span class="ident">clear</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Clear the matrix.  This does not change the size but removes all
values.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.clear', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.clear" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Clear the matrix.  This does not change the size but removes all</span>
<span class="sd">    values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_clear</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.compare">
    <p>def <span class="ident">compare</span>(</p><p>self, other, op, strop)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.compare', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.compare" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">strop</span><span class="p">):</span>
    <span class="n">C</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">BOOL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">op</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">B</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">dup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">B</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">other</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">emult</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">strop</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">C</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">C</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">strop</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">BOOL</span><span class="o">.</span><span class="n">ONE</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">C</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">C</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
        <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full</span><span class="p">()</span>
        <span class="n">B</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">full</span><span class="p">()</span>
        <span class="n">A</span><span class="o">.</span><span class="n">emult</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">strop</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">C</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">C</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Unknown matrix comparison type.&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.diag">
    <p>def <span class="ident">diag</span>(</p><p>self, thunk=&lt;cdata &#39;void *&#39; NULL&gt;)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.diag', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.diag" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">diag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_DIAG</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">thunk</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.dup">
    <p>def <span class="ident">dup</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Create an duplicate Matrix.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.dup', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.dup" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create an duplicate Matrix.&quot;&quot;&quot;</span>
    <span class="n">new_mat</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_dup</span><span class="p">(</span><span class="n">new_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">new_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.eadd">
    <p>def <span class="ident">eadd</span>(</p><p>self, other, add_op=&lt;cdata &#39;void *&#39; NULL&gt;, cast=None, out=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Element-wise addition with other matrix.</p>
<p>Element-wise addition applies a binary operator element-wise
on two matrices A and B, for all entries that appear in the
set intersection of the patterns of A and B.  Other operators
other than addition can be used.</p>
<p>The pattern of the result of the element-wise addition is
the set union of the pattern of A and B. Entries in neither in
A nor in B do not appear in the result.</p>
<p>The only difference between element-wise multiplication and
addition is the pattern of the result, and what happens to
entries outside the intersection. With multiplication the
pattern of T is the intersection; with addition it is the set
union. Entries outside the set intersection are dropped for
multiplication, and kept for addition; in both cases the
operator is only applied to those (and only those) entries in
the intersection. Any binary operator can be used
interchangeably for either operation.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.eadd', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.eadd" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">eadd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">add_op</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Element-wise addition with other matrix.</span>
<span class="sd">    Element-wise addition applies a binary operator element-wise</span>
<span class="sd">    on two matrices A and B, for all entries that appear in the</span>
<span class="sd">    set intersection of the patterns of A and B.  Other operators</span>
<span class="sd">    other than addition can be used.</span>
<span class="sd">    The pattern of the result of the element-wise addition is</span>
<span class="sd">    the set union of the pattern of A and B. Entries in neither in</span>
<span class="sd">    A nor in B do not appear in the result.</span>
<span class="sd">    The only difference between element-wise multiplication and</span>
<span class="sd">    addition is the pattern of the result, and what happens to</span>
<span class="sd">    entries outside the intersection. With multiplication the</span>
<span class="sd">    pattern of T is the intersection; with addition it is the set</span>
<span class="sd">    union. Entries outside the set intersection are dropped for</span>
<span class="sd">    multiplication, and kept for addition; in both cases the</span>
<span class="sd">    operator is only applied to those (and only those) entries in</span>
<span class="sd">    the intersection. Any binary operator can be used</span>
<span class="sd">    interchangeably for either operation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">add_op</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
        <span class="n">add_op</span> <span class="o">=</span> <span class="n">current_binop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">binaryop</span><span class="o">.</span><span class="n">PLUS</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">add_op</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">add_op</span> <span class="o">=</span> <span class="n">_get_bin_op</span><span class="p">(</span><span class="n">add_op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="n">add_op</span> <span class="o">=</span> <span class="n">add_op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">_out</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_new</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">))</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_eWiseAdd_BinaryOp</span><span class="p">(</span>
            <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">mask</span><span class="p">,</span>
            <span class="n">accum</span><span class="p">,</span>
            <span class="n">add_op</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">desc</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.emult">
    <p>def <span class="ident">emult</span>(</p><p>self, other, mult_op=&lt;cdata &#39;void *&#39; NULL&gt;, cast=None, out=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Element-wise multiplication with other matrix.</p>
<p>Element-wise multiplication applies a binary operator
element-wise on two matrices A and B, for all entries that
appear in the set intersection of the patterns of A and B.
Other operators other than addition can be used.</p>
<p>The pattern of the result of the element-wise multiplication
is exactly this set intersection. Entries in A but not B, or
visa versa, do not appear in the result.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.emult', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.emult" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">emult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">mult_op</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Element-wise multiplication with other matrix.</span>
<span class="sd">    Element-wise multiplication applies a binary operator</span>
<span class="sd">    element-wise on two matrices A and B, for all entries that</span>
<span class="sd">    appear in the set intersection of the patterns of A and B.</span>
<span class="sd">    Other operators other than addition can be used.</span>
<span class="sd">    The pattern of the result of the element-wise multiplication</span>
<span class="sd">    is exactly this set intersection. Entries in A but not B, or</span>
<span class="sd">    visa versa, do not appear in the result.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">mult_op</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
        <span class="n">mult_op</span> <span class="o">=</span> <span class="n">current_binop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">binaryop</span><span class="o">.</span><span class="n">TIMES</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mult_op</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">mult_op</span> <span class="o">=</span> <span class="n">_get_bin_op</span><span class="p">(</span><span class="n">mult_op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="n">mult_op</span> <span class="o">=</span> <span class="n">mult_op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">_out</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_new</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">))</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_eWiseMult_BinaryOp</span><span class="p">(</span>
            <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">mask</span><span class="p">,</span>
            <span class="n">accum</span><span class="p">,</span>
            <span class="n">mult_op</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">desc</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.extract_col">
    <p>def <span class="ident">extract_col</span>(</p><p>self, col_index, row_slice=None, out=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Slice a column as subvector.
Use <code>desc=TransposeA</code> to slice a row.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.extract_col', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.extract_col" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">extract_col</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">row_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Slice a column as subvector.</span>
<span class="sd">    Use `desc=TransposeA` to slice a row.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">stop_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">Vector</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">stop_val</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">row_slice</span><span class="p">,</span> <span class="n">stop_val</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Col_extract</span><span class="p">(</span>
            <span class="n">out</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">desc</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.extract_matrix">
    <p>def <span class="ident">extract_matrix</span>(</p><p>self, rindex=None, cindex=None, out=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Slice a submatrix.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.extract_matrix', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.extract_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">extract_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rindex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cindex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Slice a submatrix.&quot;&quot;&quot;</span>
    <span class="n">ta</span> <span class="o">=</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">result_nrows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="k">if</span> <span class="n">ta</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
    <span class="n">result_ncols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="k">if</span> <span class="n">ta</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span>
    <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">isize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">rindex</span><span class="p">,</span> <span class="n">result_nrows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">jsize</span> <span class="o">=</span> <span class="n">_build_range</span><span class="p">(</span><span class="n">cindex</span><span class="p">,</span> <span class="n">result_ncols</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">isize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">isize</span> <span class="o">=</span> <span class="n">result_nrows</span>
    <span class="k">if</span> <span class="n">jsize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">jsize</span> <span class="o">=</span> <span class="n">result_ncols</span>
    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">isize</span><span class="p">,</span> <span class="n">jsize</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_extract</span><span class="p">(</span>
            <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">I</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="n">desc</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.extract_row">
    <p>def <span class="ident">extract_row</span>(</p><p>self, row_index, col_slice=None, out=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Slice a row as subvector.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.extract_row', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.extract_row" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">extract_row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">col_slice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Slice a row as subvector.&quot;&quot;&quot;</span>
    <span class="n">desc</span> <span class="o">=</span> <span class="n">TransposeA</span>
    <span class="k">if</span> <span class="s2">&quot;desc&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="n">desc</span> <span class="o">|</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;desc&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_col</span><span class="p">(</span><span class="n">row_index</span><span class="p">,</span> <span class="n">col_slice</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.full">
    <p>def <span class="ident">full</span>(</p><p>self, identity=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.full', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.full" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identity</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">B</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">identity</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">identity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">one</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_assignScalar</span><span class="p">(</span>
            <span class="n">B</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">identity</span><span class="p">,</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_ALL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">lib</span><span class="o">.</span><span class="n">GrB_ALL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">NULL</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eadd</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">FIRST</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.get">
    <p>def <span class="ident">get</span>(</p><p>self, i, j, default=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.get', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>
    <span class="k">except</span> <span class="n">NoValue</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">default</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.iseq">
    <p>def <span class="ident">iseq</span>(</p><p>self, other)</p>
    </div>
    

    
  
    <div class="desc"><p>Compare two matrices for equality.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.iseq', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.iseq" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">iseq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Compare two matrices for equality.&quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;_Bool*&quot;</span><span class="p">)</span>
    <span class="n">eq_op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">EQ</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_isequal</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">eq_op</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.isne">
    <p>def <span class="ident">isne</span>(</p><p>self, other)</p>
    </div>
    

    
  
    <div class="desc"><p>Compare two matrices for inequality.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.isne', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.isne" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">isne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Compare two matrices for inequality.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">iseq</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.kron">
    <p>def <span class="ident">kron</span>(</p><p>self, other, op=&lt;cdata &#39;void *&#39; NULL&gt;, cast=None, out=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Kronecker product.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.kron', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.kron" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">kronecker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Kronecker product.&quot;&quot;&quot;</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span>
            <span class="n">typ</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">ncols</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">op</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">typ</span><span class="o">.</span><span class="n">TIMES</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">BinaryOp</span><span class="p">):</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_kronecker_BinaryOp</span><span class="p">(</span>
            <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.kronecker">
    <p>def <span class="ident">kronecker</span>(</p><p>self, other, op=&lt;cdata &#39;void *&#39; NULL&gt;, cast=None, out=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Kronecker product.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.kronecker', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.kronecker" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">kronecker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Kronecker product.&quot;&quot;&quot;</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span>
            <span class="n">typ</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">ncols</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">op</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">typ</span><span class="o">.</span><span class="n">TIMES</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">BinaryOp</span><span class="p">):</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">get_binaryop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_kronecker_BinaryOp</span><span class="p">(</span>
            <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.mxm">
    <p>def <span class="ident">mxm</span>(</p><p>self, other, cast=None, out=None, semiring=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Matrix-matrix multiply.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.mxm', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.mxm" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">mxm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">semiring</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Matrix-matrix multiply.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">semiring</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">semiring</span> <span class="o">=</span> <span class="n">current_semiring</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">semiring</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">semiring</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">semiring</span> <span class="o">=</span> <span class="n">typ</span><span class="o">.</span><span class="n">PLUS_TIMES</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_mxm</span><span class="p">(</span>
            <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">mask</span><span class="p">,</span>
            <span class="n">accum</span><span class="p">,</span>
            <span class="n">semiring</span><span class="o">.</span><span class="n">get_semiring</span><span class="p">(</span><span class="n">typ</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">other</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">desc</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.mxv">
    <p>def <span class="ident">mxv</span>(</p><p>self, other, cast=None, out=None, semiring=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Matrix-vector multiply.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.mxv', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.mxv" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">mxv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">semiring</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Matrix-vector multiply.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">semiring</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">semiring</span> <span class="o">=</span> <span class="n">current_semiring</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span> <span class="ow">or</span> <span class="n">types</span><span class="o">.</span><span class="n">promote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">semiring</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">new_dimension</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span>
        <span class="p">)</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">Vector</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">new_dimension</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">semiring</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">semiring</span> <span class="o">=</span> <span class="n">typ</span><span class="o">.</span><span class="n">PLUS_TIMES</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_mxv</span><span class="p">(</span>
            <span class="n">out</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">mask</span><span class="p">,</span>
            <span class="n">accum</span><span class="p">,</span>
            <span class="n">semiring</span><span class="o">.</span><span class="n">get_semiring</span><span class="p">(</span><span class="n">typ</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">other</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">desc</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.nonzero">
    <p>def <span class="ident">nonzero</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.nonzero', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.nonzero" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">nonzero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_NONZERO</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.offdiag">
    <p>def <span class="ident">offdiag</span>(</p><p>self, thunk=&lt;cdata &#39;void *&#39; NULL&gt;)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.offdiag', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.offdiag" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">offdiag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_OFFDIAG</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">thunk</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.pattern">
    <p>def <span class="ident">pattern</span>(</p><p>self, typ=&lt;class &#39;pygraphblas.types.BOOL&#39;&gt;)</p>
    </div>
    

    
  
    <div class="desc"><p>Return the pattern of the matrix, this is a boolean Matrix where
every present value in this matrix is set to True.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.pattern', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.pattern" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">pattern</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">BOOL</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the pattern of the matrix, this is a boolean Matrix where</span>
<span class="sd">    every present value in this matrix is set to True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_pattern</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.reduce_bool">
    <p>def <span class="ident">reduce_bool</span>(</p><p>self, mon=&lt;cdata &#39;void *&#39; NULL&gt;, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reduce matrix to a boolean.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.reduce_bool', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.reduce_bool" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">reduce_bool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reduce matrix to a boolean.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">mon</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
        <span class="n">mon</span> <span class="o">=</span> <span class="n">current_monoid</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">BOOL</span><span class="o">.</span><span class="n">LOR_MONOID</span><span class="p">)</span>
    <span class="n">mon</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">get_monoid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;_Bool*&quot;</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_reduce_BOOL</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.reduce_float">
    <p>def <span class="ident">reduce_float</span>(</p><p>self, mon=&lt;cdata &#39;void *&#39; NULL&gt;, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reduce matrix to an float.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.reduce_float', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.reduce_float" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">reduce_float</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reduce matrix to an float.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">mon</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
        <span class="n">mon</span> <span class="o">=</span> <span class="n">current_monoid</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">PLUS_MONOID</span><span class="p">)</span>
    <span class="n">mon</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">get_monoid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;double*&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_reduce_FP64</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.reduce_int">
    <p>def <span class="ident">reduce_int</span>(</p><p>self, mon=&lt;cdata &#39;void *&#39; NULL&gt;, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reduce matrix to an integer.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.reduce_int', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.reduce_int" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">reduce_int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reduce matrix to an integer.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">mon</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
        <span class="n">mon</span> <span class="o">=</span> <span class="n">current_monoid</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">INT64</span><span class="o">.</span><span class="n">PLUS_MONOID</span><span class="p">)</span>
    <span class="n">mon</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">get_monoid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;int64_t*&quot;</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_reduce_INT64</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.reduce_vector">
    <p>def <span class="ident">reduce_vector</span>(</p><p>self, mon=&lt;cdata &#39;void *&#39; NULL&gt;, out=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reduce matrix to a vector.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.reduce_vector', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.reduce_vector" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">reduce_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reduce matrix to a vector.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">mon</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
        <span class="n">mon</span> <span class="o">=</span> <span class="n">current_monoid</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s2">&quot;PLUS_MONOID&quot;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">))</span>
    <span class="n">mon</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">get_monoid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">Vector</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_reduce_Monoid</span><span class="p">(</span>
            <span class="n">out</span><span class="o">.</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.resize">
    <p>def <span class="ident">resize</span>(</p><p>self, nrows, ncols)</p>
    </div>
    

    
  
    <div class="desc"><p>Resize the matrix.  If the dimensions decrease, entries that fall
outside the resized matrix are deleted.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.resize', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.resize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Resize the matrix.  If the dimensions decrease, entries that fall</span>
<span class="sd">    outside the resized matrix are deleted.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_resize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.select">
    <p>def <span class="ident">select</span>(</p><p>self, op, thunk=&lt;cdata &#39;void *&#39; NULL&gt;, out=&lt;cdata &#39;void *&#39; NULL&gt;, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.select', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.select" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">NULL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="n">NULL</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">_get_select_op</span><span class="p">(</span><span class="n">op</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">thunk</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
        <span class="n">thunk</span> <span class="o">=</span> <span class="n">Scalar</span><span class="o">.</span><span class="n">from_value</span><span class="p">(</span><span class="n">thunk</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">thunk</span><span class="p">,</span> <span class="n">Scalar</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alives</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">]</span> <span class="o">=</span> <span class="n">thunk</span>
        <span class="n">thunk</span> <span class="o">=</span> <span class="n">thunk</span><span class="o">.</span><span class="n">scalar</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">GxB_Matrix_select</span><span class="p">(</span>
            <span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">thunk</span><span class="p">,</span> <span class="n">desc</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.to_arrays">
    <p>def <span class="ident">to_arrays</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.to_arrays', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.to_arrays" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_arrays</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">typecode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;This matrix has no array typecode.&quot;</span><span class="p">)</span>
    <span class="n">nvals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>
    <span class="n">_nvals</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[1]&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">nvals</span><span class="p">])</span>
    <span class="n">I</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
    <span class="n">J</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
    <span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">nvals</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractTuples</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">_nvals</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="k">return</span> <span class="n">array</span><span class="p">(</span><span class="s2">&quot;L&quot;</span><span class="p">,</span> <span class="n">I</span><span class="p">),</span> <span class="n">array</span><span class="p">(</span><span class="s2">&quot;L&quot;</span><span class="p">,</span> <span class="n">J</span><span class="p">),</span> <span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">typecode</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.to_binfile">
    <p>def <span class="ident">to_binfile</span>(</p><p>self, f, comments=&lt;cdata &#39;void *&#39; NULL&gt;)</p>
    </div>
    

    
  
    <div class="desc"><p>Write this matrix using custom SuiteSparse binary format.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.to_binfile', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.to_binfile" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_binfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Write this matrix using custom SuiteSparse binary format.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_binwrite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">comments</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.to_image">
    <p>def <span class="ident">to_image</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.to_image', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.to_image" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">im</span><span class="o">.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="mi">1024</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">im</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.to_lists">
    <p>def <span class="ident">to_lists</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Extract the rows, columns and values of the Matrix as 3 lists.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.to_lists', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.to_lists" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_lists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extract the rows, columns and values of the Matrix as 3 lists.&quot;&quot;&quot;</span>
    <span class="n">I</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span><span class="p">)</span>
    <span class="n">J</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span><span class="p">)</span>
    <span class="n">V</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">C</span> <span class="o">+</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span><span class="p">)</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Index*&quot;</span><span class="p">)</span>
    <span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvals</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">Matrix_extractTuples</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="k">return</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">I</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">J</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">to_value</span><span class="p">,</span> <span class="n">V</span><span class="p">))]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.to_mm">
    <p>def <span class="ident">to_mm</span>(</p><p>self, fileobj)</p>
    </div>
    

    
  
    <div class="desc"><p>Write this matrix to a file using the Matrix Market format.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.to_mm', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.to_mm" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_mm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileobj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Write this matrix to a file using the Matrix Market format.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_mmwrite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">fileobj</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.to_numpy">
    <p>def <span class="ident">to_numpy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.to_numpy', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.to_numpy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_numpy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_scipy_sparse</span><span class="p">(</span><span class="s2">&quot;coo&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">toarray</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.to_scipy_sparse">
    <p>def <span class="ident">to_scipy_sparse</span>(</p><p>self, format=&#39;csr&#39;)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.to_scipy_sparse', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.to_scipy_sparse" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_scipy_sparse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;csr&quot;</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">sparse</span>
    <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">vals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_arrays</span><span class="p">()</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">coo_matrix</span><span class="p">((</span><span class="n">vals</span><span class="p">,</span> <span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">)),</span> <span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;coo&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">s</span>
    <span class="k">if</span> <span class="nb">format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;bsr&quot;</span><span class="p">,</span> <span class="s2">&quot;csr&quot;</span><span class="p">,</span> <span class="s2">&quot;csc&quot;</span><span class="p">,</span> <span class="s2">&quot;coo&quot;</span><span class="p">,</span> <span class="s2">&quot;lil&quot;</span><span class="p">,</span> <span class="s2">&quot;dia&quot;</span><span class="p">,</span> <span class="s2">&quot;dok&quot;</span><span class="p">}:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid format: </span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">asformat</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.to_string">
    <p>def <span class="ident">to_string</span>(</p><p>self, format_string=&#39;{:&gt;%s}&#39;, width=3, empty_char=&#39;&#39;)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.to_string', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.to_string" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_string</span><span class="o">=</span><span class="s2">&quot;{:&gt;</span><span class="si">%s</span><span class="s2">}&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">empty_char</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="n">format_string</span> <span class="o">=</span> <span class="n">format_string</span> <span class="o">%</span> <span class="n">width</span>
    <span class="n">header</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="o">+</span> <span class="s2">&quot; &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;|&quot;</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">empty_char</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">format_value</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;|&quot;</span> <span class="o">+</span> <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">result</span> <span class="o">+=</span> <span class="n">header</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.transpose">
    <p>def <span class="ident">transpose</span>(</p><p>self, cast=None, out=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Transpose matrix.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.transpose', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.transpose" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Transpose matrix. &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">new_dimensions</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">TransposeA</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="p">())</span>
            <span class="k">else</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">_out</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cast</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">typ</span> <span class="o">=</span> <span class="n">cast</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">typ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_new</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="o">*</span><span class="n">new_dimensions</span><span class="p">))</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">_out</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
    <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_transpose</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="n">accum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">desc</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.tril">
    <p>def <span class="ident">tril</span>(</p><p>self, thunk=&lt;cdata &#39;void *&#39; NULL&gt;)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.tril', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.tril" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">tril</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_TRIL</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">thunk</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.triu">
    <p>def <span class="ident">triu</span>(</p><p>self, thunk=&lt;cdata &#39;void *&#39; NULL&gt;)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.triu', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.triu" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">triu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">NULL</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GxB_TRIU</span><span class="p">,</span> <span class="n">thunk</span><span class="o">=</span><span class="n">thunk</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.wait">
    <p>def <span class="ident">wait</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.wait', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.wait" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_wait</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.T" class="name">var <span class="ident">T</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.cols" class="name">var <span class="ident">cols</span></p>
            

            
  
    <div class="desc"><p>An iterator of column indexes present in the matrix.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.format" class="name">var <span class="ident">format</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.gb_type" class="name">var <span class="ident">gb_type</span></p>
            

            
  
    <div class="desc"><p>Return the GraphBLAS low-level type object of the Matrix.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.hyper_switch" class="name">var <span class="ident">hyper_switch</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.matrix" class="name">var <span class="ident">matrix</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.ncols" class="name">var <span class="ident">ncols</span></p>
            

            
  
    <div class="desc"><p>Return the number of Matrix columns.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.nrows" class="name">var <span class="ident">nrows</span></p>
            

            
  
    <div class="desc"><p>Return the number of Matrix rows.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.nvals" class="name">var <span class="ident">nvals</span></p>
            

            
  
    <div class="desc"><p>Return the number of Matrix values.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.rows" class="name">var <span class="ident">rows</span></p>
            

            
  
    <div class="desc"><p>An iterator of row indexes present in the matrix.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.shape" class="name">var <span class="ident">shape</span></p>
            

            
  
    <div class="desc"><p>Numpy-like description of matrix shape.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.sparsity_control" class="name">var <span class="ident">sparsity_control</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.sparsity_status" class="name">var <span class="ident">sparsity_status</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.square" class="name">var <span class="ident">square</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.type" class="name">var <span class="ident">type</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="pygraphblas.matrix.Matrix.vals" class="name">var <span class="ident">vals</span></p>
            

            
  
    <div class="desc"><p>An iterator of values present in the matrix.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.dense">
    <p>def <span class="ident">dense</span>(</p><p>cls, typ, nrows=1, ncols=1, fill=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.dense', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.dense" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">dense</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">nrows</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">ncols</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;dense matrix must be at least 1x1&quot;</span>
    <span class="n">m</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fill</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fill</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">zero</span>
    <span class="n">m</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">fill</span>
    <span class="k">return</span> <span class="n">m</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.from_binfile">
    <p>def <span class="ident">from_binfile</span>(</p><p>cls, bin_file)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a new matrix by reading a SuiteSparse specific binary file.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.from_binfile', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.from_binfile" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_binfile</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">bin_file</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a new matrix by reading a SuiteSparse specific binary file.&quot;&quot;&quot;</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
    <span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_binread</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">bin_file</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.from_lists">
    <p>def <span class="ident">from_lists</span>(</p><p>cls, I, J, V, nrows=None, ncols=None, typ=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a new matrix from the given lists of row indices, column
indices, and values.  If nrows or ncols are not provided, they
are computed from the max values of the provides row and
column indices lists.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.from_lists', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.from_lists" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_lists</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a new matrix from the given lists of row indices, column</span>
<span class="sd">    indices, and values.  If nrows or ncols are not provided, they</span>
<span class="sd">    are computed from the max values of the provides row and</span>
<span class="sd">    column indices lists.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">I</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">J</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nrows</span><span class="p">:</span>
        <span class="n">nrows</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">I</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ncols</span><span class="p">:</span>
        <span class="n">ncols</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">J</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="c1"># TODO use ffi and GrB_Matrix_build</span>
    <span class="k">if</span> <span class="n">typ</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">typ</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">_gb_from_type</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">V</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="n">m</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">V</span><span class="p">):</span>
        <span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
    <span class="k">return</span> <span class="n">m</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.from_mm">
    <p>def <span class="ident">from_mm</span>(</p><p>cls, mm_file, typ)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a new matrix by reading a Matrix Market file.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.from_mm', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.from_mm" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_mm</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">mm_file</span><span class="p">,</span> <span class="n">typ</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a new matrix by reading a Matrix Market file.&quot;&quot;&quot;</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
    <span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_mmread</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">mm_file</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">i</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.from_tsv">
    <p>def <span class="ident">from_tsv</span>(</p><p>cls, tsv_file, typ, nrows, ncols)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a new matrix by reading a tab separated value file.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.from_tsv', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.from_tsv" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_tsv</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tsv_file</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a new matrix by reading a tab separated value file.&quot;&quot;&quot;</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
    <span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_tsvread</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">tsv_file</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">i</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.identity">
    <p>def <span class="ident">identity</span>(</p><p>cls, typ, nrows, one=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.identity', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.identity" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">identity</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">nrows</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">one</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">one</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">one</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nrows</span><span class="p">):</span>
        <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">one</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.random">
    <p>def <span class="ident">random</span>(</p><p>cls, typ, nrows, ncols, nvals, make_pattern=False, make_symmetric=False, make_skew_symmetric=False, make_hermitian=True, no_diagonal=False, seed=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a new random Matrix of the given type, number of rows,
columns and values.  Other flags set additional properties the
matrix will hold.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.random', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.random" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">random</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">typ</span><span class="p">,</span>
    <span class="n">nrows</span><span class="p">,</span>
    <span class="n">ncols</span><span class="p">,</span>
    <span class="n">nvals</span><span class="p">,</span>
    <span class="n">make_pattern</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">make_symmetric</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">make_skew_symmetric</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">make_hermitian</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">no_diagonal</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a new random Matrix of the given type, number of rows,</span>
<span class="sd">    columns and values.  Other flags set additional properties the</span>
<span class="sd">    matrix will hold.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
    <span class="n">fseed</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;uint64_t*&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">seed</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">seed</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="p">)</span>
    <span class="n">fseed</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">seed</span>
    <span class="n">_check</span><span class="p">(</span>
        <span class="n">lib</span><span class="o">.</span><span class="n">LAGraph_random</span><span class="p">(</span>
            <span class="n">result</span><span class="p">,</span>
            <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span>
            <span class="n">nrows</span><span class="p">,</span>
            <span class="n">ncols</span><span class="p">,</span>
            <span class="n">nvals</span><span class="p">,</span>
            <span class="n">make_pattern</span><span class="p">,</span>
            <span class="n">make_symmetric</span><span class="p">,</span>
            <span class="n">make_skew_symmetric</span><span class="p">,</span>
            <span class="n">make_hermitian</span><span class="p">,</span>
            <span class="n">no_diagonal</span><span class="p">,</span>
            <span class="n">fseed</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">i</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="pygraphblas.matrix.Matrix.sparse">
    <p>def <span class="ident">sparse</span>(</p><p>cls, typ, nrows=0, ncols=0)</p>
    </div>
    

    
  
    <div class="desc"><p>Create an empty Matrix from the given type, number of rows, and
number of columns.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-pygraphblas.matrix.Matrix.sparse', this);">Show source &equiv;</a></p>
  <div id="source-pygraphblas.matrix.Matrix.sparse" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">sparse</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create an empty Matrix from the given type, number of rows, and</span>
<span class="sd">    number of columns.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_mat</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;GrB_Matrix*&quot;</span><span class="p">)</span>
    <span class="n">_check</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">GrB_Matrix_new</span><span class="p">(</span><span class="n">new_mat</span><span class="p">,</span> <span class="n">typ</span><span class="o">.</span><span class="n">gb_type</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">))</span>
    <span class="n">m</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">new_mat</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">m</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
